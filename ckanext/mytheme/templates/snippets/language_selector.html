{% set current_lang = request.environ.CKAN_LANG %}
<form
  class="lang-select"
  action="{% url_for 'util.internal_redirect' %}"
  data-module="select-switch"
  method="POST"
>
  {{ h.csrf_input() }}
  <div class="dropdown lang-select">
    <button
      class="btn btn-primary dropdown-toggle lang-btn"
      type="button"
      id="langDropdown"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      <i class="fa-solid fa-globe"></i>
    </button>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="langDropdown">
      {% for locale in h.get_available_locales() %}
      <li>
        <a
          class="dropdown-item"
          href="{% url_for h.current_url(), locale=locale.short_name %}"
        >
          {{ locale.display_name or locale.english_name }}
        </a>
      </li>
      {% endfor %}
    </ul>
  </div>
</form>
